&emsp;&emsp;@author 巷北  
&emsp;&emsp;@time 2026-01-09 17:13:39  

- [问题](#问题)
    - [问题1](#问题1)
    - [问题2](#问题2)

# 问题
## 问题1
- 目前可能会存在内存泄漏的问题. 怎么泄漏的呢? 我也不清楚. 具体表现就是内存占有量不断升高, 越来越卡顿, 直至在终端中无法移动. 关掉这个终端就能恢复. 偶尔会提示弹窗, 说什么访问某个不存在的地址. 
- 第一次出现是在昨天, 我在`neovim`中开启了一个虚拟终端, 并用来编译`qt`程序. 前两三次没问题, 可后面总会卡, 就是在这个虚拟终端中无法运行程序. 之后了解了一下, 建议不要这么做, 还是另启一个终端才行. 可后面仍然会卡, 发现原来是内存占用率越来越高. 关掉`neovim`开启的那个终端即可(不是运行程序终端).
- 是`qt`的问题, 还是`neovim`问题呢? 很不清楚. 因为关机之后, 还是可能会存在. 今天(也就是刚才), 又出现了这个问题. 我没有在`neovim`的虚拟终端中运行, 一般就是打开编译好的程序, 退出后会有. 可是刚才我又测试了多次, 并没有发现问题.
- `qt` 中都是`new` 对象, 没有手动`delete`, 但是我将问题代码给`ai` 后, 把可能存在的问题都修改了, 不过仍然会跳问题. 
- 难道说是`neovim`? 毕竟关了用`neovim`打开代码的终端, 就不存在该问题了. 但, 总感觉怪怪的. 
- 如果是程序问题, 我觉得编译期间应该就会报错. 而且`qt` 拥有`30`年的历史, 不可能这么容易暴毙吧?
- 还有一种可能, 就是我双终端操作, 一个终端专门编译+运行, 一个终端专门写代码. 编译运行的时候, 写代码的终端并不会退出去. 为什么存在这种可能呢? 因为我印象里, 单终端操作, 似乎没有内存泄漏的情况发生. 
- 那么根本原因是什么呢? 又是否能找到呢?

**可能原因**

- 这两天又写了写, 发现了可能导致内存泄漏的问题. 
- 主要原因还是对`qt`不太理解. 但这并不是根本问题, 毕竟学`qt` 才三四天时间. 想快速建立理解, 几乎不可能. 
- 什么问题呢? 我一般会自定义`QWidget`, 调用的时候, 会直接使用`new X`来实例化. 后续写`ImageSlider` 类的时候, 思考了一下, 是否需要继承`QWidget`呢? 继承与否, 有什么区别的? 
- 虽然有疑问, 但是这个疑问去问`ai`的话, 似乎也什么都闻不出来(我没问). 所以就放在那里了. 
- 后面跟`ai` 学习的时候, 发现了一点, 就是除了直接`new` 对象外, 还可以直接传入当前对象指针, 也就是`new X(this)`. 看到这里, 我觉得我快明白了. 问`ai`, 是否传入`this`指针, 有什么影响吗(此时我已经测试过了, 是否传入, 从展示效果上来看, 没有区别). `ai` 跟我说, 父类会帮忙管理指针, 不用手动`delete`. 如果不传入的话, 需要手动删除. 
- 虽然我之前都没有手动删除过, 但是运行时经常没问题, 偶尔会存在内存泄漏问题. 
- 所以, 我觉得这是导致内存泄漏的根本原因.
- 但不过话又说回来了, 我是双终端运行, 一个终端写, 一个终端执行. 但卡住的布置执行终端, 而是写的终端. 如果是上述问题的话, 卡住的应该是执行终端, 哈哈..

## 问题2
- 一开始写的时候呢, 对`qt`很不熟悉, 也是边学变写. 所以, 刚开始自定义的类, 目前来看的话, 十分不合理. 
- 由于时间问题, 想重新整理一下结构, 几乎也是不可能的. 虽然不直接改代码, 但是改了文件目录, `cmake`中的相关依赖路径, 也都需要更改. 
- 最主要的还是担心, 万一发现问题, 想找问题, 却总是找不到. 以我的性格的话, 找不到肯定誓不罢休的, 这样又会白白搭进去很长时间, 最后导致任务无法完成. 
- 现在来看, 还是依靠贪心算法吧, 当前最优即可. 虽然从全局来看, 肯定不是最优的, 但可以在有限的时间内, 迅速地完成任务.
