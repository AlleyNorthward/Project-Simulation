&emsp;&emsp;@author 巷北  
&emsp;&emsp;@time 2026-01-11 23:06:39  

# 简介
&emsp;&emsp;最终还是写完了. 虽然实现的不怎么样, 但确实也是尽力了. 最后的截止时间是`11` 号的晚上十点半, 不过学习通中的截止时间是`12`号的下午两三点左右. 本来打算在`11` 号下午录制视频, 晚上的时候再提交, 但是昨天晚上发现, 赶一赶的话, 也能写完, 但是太糙了. 所以我在群里说了这么一句话:"雏形大致就这样, 写完到是能很快写完, 但我不想那样, 很糙.  我想享受设计这个过程, 而不是ai得到结果, 所以就后天再提交吧.". <br>
&emsp;&emsp;确实. 在我看来, 很多东西都是兴趣驱动, 没有兴趣, 谁愿意写呢? <br>
&emsp;&emsp;不过很不幸的是, 作为数据库结课作业, 我一直在思考前端的东西, 数据库层面的东西没有弄好. 当发现这个问题时, 完全推倒重来的话, 时间也已经不够了. 整个项目是用`c++`的`qt`写的, 里面用到的技术, 差不多是我`2025`年所学东西的整合. <br>
&emsp;&emsp;`2025` 开年, 遇到了`manim`, 一个`python`数学库, 在里面学到了很多面向对象思想, 以及前端思想(后知后觉). `2025` 后半年, 深入`c++`, 学了`cmake` 等相关的东西, 但是仍然缺少实战经验. 最后, 打算用`qt` 实现数据库相关的东西, 里面的前端思想很快就学会了, 而且是用`c++`写的, 可以用`cmake`构建, 正好可以深入练习. <br>
&emsp;&emsp;当然, 所有学习到的东西在另一个文档里, 我命名为了`ai`使用报告, 虽然最后并没有说需要提交, 不过里面也断断续续地写了很多东西. 至少我觉得值得一看的. <br>
&emsp;&emsp;好了, 废话不多说了, 来看看这个数据库相关的项目吧. <br>
对了, 老师登录用户名是`teacher`, 密码是`123456`.

- [运行环境](#运行环境)
- [程序运行](#程序运行)
- [sql脚本](#sql脚本)

## 运行环境

~~~powershell
mysql --version
~~~

~~~out
C:\Program Files\MySQL\MySQL Server 9.5\bin\mysql.exe  Ver 9.5.0 for Win64 on x86_64 (MySQL Community Server - GPL)
~~~

- 可以看到, 数据库版本是`9.5.0`版本的.

~~~powershell
which g++
~~~

~~~out
/f/Qt/Qt.6.9/Tools/mingw1310_64/bin/g++
~~~

- 我是用终端编写的, 并不是用`qt` 自带的软件编写的, 所以我需要查看`g++` 版本, 就能看到对应`qt` 版本. 这里使用的是`qt6.9`, 具体应该是`qt6.93`.

~~~out
C:\Windows\System32\odbcad32.exe
~~~

- 这是很关键的东西, `ODBC`. 为什么使用`ODBC`呢? 因为`qt` 访问`mysql` 的话, 没法直接访问. 因为下载`qt`时, 不会携带相关的驱动文件. 如果想灵活运行(比如跨电脑执行), 最好携带相关的驱动文件. 但是驱动文件很难弄, 需要编译源码. 我从`b`站看的视频, 几乎都是`qt5.x` 版本的, 使用`qmake`构建的. 而我使用的是`6.x`, 采用`cmake`构建, 所以无法效仿. 写了一段时间后, 对`cmake` 也有了一定的理解, 所以也构建好了相关依赖项. 但最后一个问题就是编译器的问题. `win`端大部分都是采用`MSVC` 构建代码的, `qt` 也不例外. 之前弄`C/C++` 编译导入`python` 时, 我自己下载了`MSVC`. 而`qt` 端编译`mysql`, 需要采用`qt` 自己的`MSVC`, 这两个还有很多不同. 使用`MingW`编译也是无法解决 `qt` 访问`mysql` 的问题的. 
- 最后, 还是老老实实地采用了`ODBC`. 虽然跨电脑很难打包, 但是在单一电脑上使用, 还是很容易的. 
- **所以, 想运行文件, 必须下载`ODBC`, 而且必须是跟自己`mysql` 版本相同的的版本才行, 否则根本无法执行!**
- 当然, 之前我下载的时候, 记录了下载流程, 直接`copy`到下面了. 
    - 首先, 需要下载`OBDC`, 网址`https://dev.mysql.com/downloads/connector/odbc/`, 选择自己版本的数据库, 下载即可. 
    - 执行如下命令运行
    ~~~powershell
    C:\Windows\System32\odbcad32.exe
    ~~~
    - 选择系统`DSN`, 添加`MYSQL ODBC 9.5 Unicode Driver`, 注意, 是自己版本号的, 我的版本是`9.5`版本的. 
    - 然后, 第一个名字就是`QT`连接的名字, 自己随便取就行, 不用非得跟数据库名一样
    - `localhost`, 其它的不用动. 
    - 接着, 用户就是`root`, 密码自己输入, 数据库(模式)就选择自己对应的即可.
- 必要的东西似乎就这么多吧, 一个是`mysql`, 另一个是`qt6.x`, 最后一个就是`ODBC`. 应该没有别的东西了.

## 程序运行
- 当前目录不是项目目录, 需要进入到`Project` 中才行!!
- 运行之前, 在`main.cpp` 文件中, 修改自己数据库的密码. `main` 中代码不多, 很容易发现的. 
- 整个代码我其实已经编译过了, 可执行文件在`./build`中, 也就是`main.exe`文件(缺少上述依赖项, 无法直接运行).
- 如果想自己编译, 可以执行如下命令行.

~~~powershell
rm ./build
cmake -S . -B build -DM=main
cmake --build build
~~~

- 注意, 单行执行, 不要全复制直接执行.
- 编译完成后, 会生成`build`文件夹, 里面有`.exe` 可执行文件. 如果能直接编译, 说明包含所有的依赖项, 一般情况下能直接运行的. 

## sql脚本
- 整个脚本, 是按照报告格式, 结合前端相关内容写的. 当时不知道`Navicat`, 所以是单文件写的. 后面知道`Navicat`后, 发现单文件导入的话, 太麻烦了, 所以, 每个文件夹内部都有一个`total.sql`, 是方便从`Navicat`导入到数据库的. 
- 当然, 如果采用`SOURCE` 语句导入的话, 建议是先`SET NAMES utf8mb4`, 然后终端`chcp 65001`, 这样可以防止中文乱码. 

> 整体上来看, 就这么多吧, 我觉得想说的都说了, 尽力能在其他电脑上运行起来吧.
